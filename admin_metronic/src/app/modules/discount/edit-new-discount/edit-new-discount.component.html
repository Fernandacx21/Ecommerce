<div class="card card-custom gutter-b">
    <div class="card-header">
      <div class="card-title">
        <h3 class="card-label"><i class="icon-2x text-dark-50 flaticon-imac mx-2"></i> EDITAR DESCUENTO : #{{ discount_selected ? discount_selected._id : '' }}</h3>
      </div>
      <div class="card-toolbar">
            
      </div>
    </div>
    <div class="card-body">
        <ng-container *ngIf="isLoading$ | async">
            <span class="spinner spinner-primary ml-5"></span>
        </ng-container>

        <div class="form-group row">
            <div class="col-4">
                <div class="form-group">
                    <label>Tipo de Camapaña: </label>
                    <div class="radio-list">
                        <label class="radio">
                            <input type="radio" [checked]="type_campaign == 1" (click)="checkedTypeCampaign(1)" name="radiosC">
                            <span></span>
                            CAMPAÑA DE DESCUENTO
                        </label>
                        <label class="radio">
                            <input type="radio" [checked]="type_campaign == 2" (click)="checkedTypeCampaign(2)" name="radiosC">
                            <span></span>
                            VENTA FLASH
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                    <label>Tipo de descuento: </label>
                    <div class="radio-list">
                        <label class="radio">
                            <input type="radio" [checked]="type_discount == 1" (click)="checkedTypeDiscount(1)" name="radios1">
                            <span></span>
                            PORCENTAJE
                        </label>
                        <label class="radio">
                            <input type="radio" [checked]="type_discount == 2" (click)="checkedTypeDiscount(2)" name="radios1">
                            <span></span>
                            MONEDA
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                    <label>Descuento: <span class="text-danger">*</span></label>
                    <input type="number" class="form-control" placeholder="" [(ngModel)]="discount" name="discount">
                    <span class="form-text text-muted">Ingresa la cantidad.</span>
                </div>
            </div>
        </div>

        <div class="form-group row">
            <div class="col-4">
                <label>Fecha inicio: *</label>
                <div class="input-group input-group-solid">
                  <input type="date"
                  class="form-control form-control-lg form-control-solid"
                  [(ngModel)]="start_date"
                  />
                </div>
            </div>
            <div class="col-4">
                <label>Fecha fin: *</label>
                <div class="input-group input-group-solid">
                  <input type="date"
                  class="form-control form-control-lg form-control-solid"
                  [(ngModel)]="end_date"
                  />
                </div>
            </div>
        </div>

        <div class="form-group row">
            <div class="col-4">
                <div class="form-group">
                    <label>PRODUCTO/CATEGORIAS: </label>
                    <div class="radio-list">
                        <label class="radio">
                            <input type="radio" [checked]="type_segment == 1" (click)="checkedTypeSegment(1)" name="radios3">
                            <span></span>
                            PRODUCTO
                        </label>
                        <label class="radio">
                            <input type="radio" [checked]="type_segment == 2" (click)="checkedTypeSegment(2)" name="radios3">
                            <span></span>
                            CATEGORIAS
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-4" *ngIf="type_segment == 1">
                <div class="form-group">
                    <label>Selec. Productos: <span class="text-danger">*</span></label>
                    <select
                        class="form-control"
                        name="categorie"
                        [(ngModel)]="product"
                    >
                        <option value="">Ninguno</option>
                        <ng-container *ngFor="let item of products">
                            <option [value]="item._id">{{ item.title }}</option>
                        </ng-container>
                        
                    </select>
                </div>
            </div>
            <div class="col-4" *ngIf="type_segment == 2">
                <div class="form-group">
                    <label>Selec. Categoria: <span class="text-danger">*</span></label>
                    <select
                        class="form-control"
                        name="categorie"
                        [(ngModel)]="categorie"
                    >
                        <option value="">Ninguno</option>
                        <ng-container *ngFor="let item of categories">
                            <option [value]="item._id">{{ item.title }}</option>
                        </ng-container>
                        
                    </select>
                </div>
            </div>
            <div class="col-4">
                <button class="btn btn-primary" (click)="addProductOrCategorie()">AGREGAR</button>
            </div>
            <div class="col-12">
                <div class="table-responsive">
                    <table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                        <thead>
                            <tr class="text-left">
                                <th *ngIf="type_segment == 1">PRODUCTO</th>
                                <th *ngIf="type_segment == 2">CATEGORIA</th>
                                <th>ACCIÓN</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="type_segment == 1">
                            <tr *ngFor="let product of products_selected">
                                <td>{{ product.title }}</td>
                                <td>
                                    <button class="btn btn-danger btn-sm" (click)="removeProduct(product)">X</button>
                                </td>
                            </tr>
                        </tbody>
                        <tbody *ngIf="type_segment == 2">
                            <tr *ngFor="let categorie of categories_selected">
                                <td>{{ categorie.title }}</td>
                                <td>
                                    <button class="btn btn-danger btn-sm" (click)="removeCategorie(categorie)">X</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="form-group row">
            <div class="col-12">
                <button class="btn btn-primary" (click)="save()"> EDITAR DESCUENTO</button>
            </div>
        </div>
    </div>
  </div>